<table id="completetable"></table>
<script type="text/javascript">
var completetask = {};
$('#completetable').datagrid({
	 url:path+"xtgl/completeTask.action",
	 method:"post",
	 striped:true,
	 fit:true,
	 singleSelect:true,
	 queryParams:{"leavevo.userid":$("#userid").val()},
	 fitColumns:true,
	 rownumbers:true,
	 loadMsg:"数据加载中...",
	 columns:[[
	    {field:'flowname',title:'流程名称',align:'left',width:100},
	    {field:'applyusername',title:'申请人',align:'left',width:100},
	    {field:'starttime',title:'申请时间',align:'center',width:100},
	    {field:'endtime',title:'结束时间',align:'center',width:100},
	    {field:'flowstate',title:'状态',align:'center',width:100},
	    {field:'formkey',title:'操作',align:'center',width:100,formatter:function(value, row, index) {
			return '<a href="#" onclick=completetask.toDeal("'+value+'","'
				+row.businesskey+'","'+row.flowdepid+'","'+row.imagename+'","'+row.state+'")>查看</a>';
	    }}
	 ]]
});
completetask.toDeal = function(url, businesskey, flowdepid, flowimagename, state) {
	index.flowdepid = flowdepid;
	index.flowimagename = flowimagename;
	index.businesskey = businesskey;
	index.hisstate = state;
	$("#flowFormWin").dialog("open");
	$('#flowFormWin').panel("refresh", path + url);
};
</script>